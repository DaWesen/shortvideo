// Code generated by Kitex v0.15.2. DO NOT EDIT.

package danmuservice

import (
	"context"
	"errors"
	client "github.com/cloudwego/kitex/client"
	kitex "github.com/cloudwego/kitex/pkg/serviceinfo"
	danmu "shortvideo/kitex_gen/danmu"
)

var errInvalidMessageType = errors.New("invalid message type for service method handler")

var serviceMethods = map[string]kitex.MethodInfo{
	"SendDanmu": kitex.NewMethodInfo(
		sendDanmuHandler,
		newDanmuServiceSendDanmuArgs,
		newDanmuServiceSendDanmuResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"GetDanmuHistory": kitex.NewMethodInfo(
		getDanmuHistoryHandler,
		newDanmuServiceGetDanmuHistoryArgs,
		newDanmuServiceGetDanmuHistoryResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"SetDanmuFilter": kitex.NewMethodInfo(
		setDanmuFilterHandler,
		newDanmuServiceSetDanmuFilterArgs,
		newDanmuServiceSetDanmuFilterResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"GetDanmuFilter": kitex.NewMethodInfo(
		getDanmuFilterHandler,
		newDanmuServiceGetDanmuFilterArgs,
		newDanmuServiceGetDanmuFilterResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"GetDanmuStats": kitex.NewMethodInfo(
		getDanmuStatsHandler,
		newDanmuServiceGetDanmuStatsArgs,
		newDanmuServiceGetDanmuStatsResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"ManageDanmu": kitex.NewMethodInfo(
		manageDanmuHandler,
		newDanmuServiceManageDanmuArgs,
		newDanmuServiceManageDanmuResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
	"LikeDanmu": kitex.NewMethodInfo(
		likeDanmuHandler,
		newDanmuServiceLikeDanmuArgs,
		newDanmuServiceLikeDanmuResult,
		false,
		kitex.WithStreamingMode(kitex.StreamingNone),
	),
}

var (
	danmuServiceServiceInfo                = NewServiceInfo()
	danmuServiceServiceInfoForClient       = NewServiceInfoForClient()
	danmuServiceServiceInfoForStreamClient = NewServiceInfoForStreamClient()
)

// for server
func serviceInfo() *kitex.ServiceInfo {
	return danmuServiceServiceInfo
}

// for stream client
func serviceInfoForStreamClient() *kitex.ServiceInfo {
	return danmuServiceServiceInfoForStreamClient
}

// for client
func serviceInfoForClient() *kitex.ServiceInfo {
	return danmuServiceServiceInfoForClient
}

// NewServiceInfo creates a new ServiceInfo containing all methods
func NewServiceInfo() *kitex.ServiceInfo {
	return newServiceInfo(false, true, true)
}

// NewServiceInfo creates a new ServiceInfo containing non-streaming methods
func NewServiceInfoForClient() *kitex.ServiceInfo {
	return newServiceInfo(false, false, true)
}
func NewServiceInfoForStreamClient() *kitex.ServiceInfo {
	return newServiceInfo(true, true, false)
}

func newServiceInfo(hasStreaming bool, keepStreamingMethods bool, keepNonStreamingMethods bool) *kitex.ServiceInfo {
	serviceName := "DanmuService"
	handlerType := (*danmu.DanmuService)(nil)
	methods := map[string]kitex.MethodInfo{}
	for name, m := range serviceMethods {
		if m.IsStreaming() && !keepStreamingMethods {
			continue
		}
		if !m.IsStreaming() && !keepNonStreamingMethods {
			continue
		}
		methods[name] = m
	}
	extra := map[string]interface{}{
		"PackageName": "danmu",
	}
	if hasStreaming {
		extra["streaming"] = hasStreaming
	}
	svcInfo := &kitex.ServiceInfo{
		ServiceName:     serviceName,
		HandlerType:     handlerType,
		Methods:         methods,
		PayloadCodec:    kitex.Thrift,
		KiteXGenVersion: "v0.15.2",
		Extra:           extra,
	}
	return svcInfo
}

func sendDanmuHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceSendDanmuArgs)
	realResult := result.(*danmu.DanmuServiceSendDanmuResult)
	success, err := handler.(danmu.DanmuService).SendDanmu(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceSendDanmuArgs() interface{} {
	return danmu.NewDanmuServiceSendDanmuArgs()
}

func newDanmuServiceSendDanmuResult() interface{} {
	return danmu.NewDanmuServiceSendDanmuResult()
}

func getDanmuHistoryHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceGetDanmuHistoryArgs)
	realResult := result.(*danmu.DanmuServiceGetDanmuHistoryResult)
	success, err := handler.(danmu.DanmuService).GetDanmuHistory(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceGetDanmuHistoryArgs() interface{} {
	return danmu.NewDanmuServiceGetDanmuHistoryArgs()
}

func newDanmuServiceGetDanmuHistoryResult() interface{} {
	return danmu.NewDanmuServiceGetDanmuHistoryResult()
}

func setDanmuFilterHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceSetDanmuFilterArgs)
	realResult := result.(*danmu.DanmuServiceSetDanmuFilterResult)
	success, err := handler.(danmu.DanmuService).SetDanmuFilter(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceSetDanmuFilterArgs() interface{} {
	return danmu.NewDanmuServiceSetDanmuFilterArgs()
}

func newDanmuServiceSetDanmuFilterResult() interface{} {
	return danmu.NewDanmuServiceSetDanmuFilterResult()
}

func getDanmuFilterHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceGetDanmuFilterArgs)
	realResult := result.(*danmu.DanmuServiceGetDanmuFilterResult)
	success, err := handler.(danmu.DanmuService).GetDanmuFilter(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceGetDanmuFilterArgs() interface{} {
	return danmu.NewDanmuServiceGetDanmuFilterArgs()
}

func newDanmuServiceGetDanmuFilterResult() interface{} {
	return danmu.NewDanmuServiceGetDanmuFilterResult()
}

func getDanmuStatsHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceGetDanmuStatsArgs)
	realResult := result.(*danmu.DanmuServiceGetDanmuStatsResult)
	success, err := handler.(danmu.DanmuService).GetDanmuStats(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceGetDanmuStatsArgs() interface{} {
	return danmu.NewDanmuServiceGetDanmuStatsArgs()
}

func newDanmuServiceGetDanmuStatsResult() interface{} {
	return danmu.NewDanmuServiceGetDanmuStatsResult()
}

func manageDanmuHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceManageDanmuArgs)
	realResult := result.(*danmu.DanmuServiceManageDanmuResult)
	success, err := handler.(danmu.DanmuService).ManageDanmu(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceManageDanmuArgs() interface{} {
	return danmu.NewDanmuServiceManageDanmuArgs()
}

func newDanmuServiceManageDanmuResult() interface{} {
	return danmu.NewDanmuServiceManageDanmuResult()
}

func likeDanmuHandler(ctx context.Context, handler interface{}, arg, result interface{}) error {
	realArg := arg.(*danmu.DanmuServiceLikeDanmuArgs)
	realResult := result.(*danmu.DanmuServiceLikeDanmuResult)
	success, err := handler.(danmu.DanmuService).LikeDanmu(ctx, realArg.Req)
	if err != nil {
		return err
	}
	realResult.Success = success
	return nil
}
func newDanmuServiceLikeDanmuArgs() interface{} {
	return danmu.NewDanmuServiceLikeDanmuArgs()
}

func newDanmuServiceLikeDanmuResult() interface{} {
	return danmu.NewDanmuServiceLikeDanmuResult()
}

type kClient struct {
	c client.Client
}

func newServiceClient(c client.Client) *kClient {
	return &kClient{
		c: c,
	}
}

func (p *kClient) SendDanmu(ctx context.Context, req *danmu.SendDanmuReq) (r *danmu.SendDanmuResp, err error) {
	var _args danmu.DanmuServiceSendDanmuArgs
	_args.Req = req
	var _result danmu.DanmuServiceSendDanmuResult
	if err = p.c.Call(ctx, "SendDanmu", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) GetDanmuHistory(ctx context.Context, req *danmu.GetDanmuHistoryReq) (r *danmu.GetDanmuHistoryResp, err error) {
	var _args danmu.DanmuServiceGetDanmuHistoryArgs
	_args.Req = req
	var _result danmu.DanmuServiceGetDanmuHistoryResult
	if err = p.c.Call(ctx, "GetDanmuHistory", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) SetDanmuFilter(ctx context.Context, req *danmu.SetDanmuFilterReq) (r *danmu.SetDanmuFilterResp, err error) {
	var _args danmu.DanmuServiceSetDanmuFilterArgs
	_args.Req = req
	var _result danmu.DanmuServiceSetDanmuFilterResult
	if err = p.c.Call(ctx, "SetDanmuFilter", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) GetDanmuFilter(ctx context.Context, req *danmu.GetDanmuFilterReq) (r *danmu.GetDanmuFilterResp, err error) {
	var _args danmu.DanmuServiceGetDanmuFilterArgs
	_args.Req = req
	var _result danmu.DanmuServiceGetDanmuFilterResult
	if err = p.c.Call(ctx, "GetDanmuFilter", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) GetDanmuStats(ctx context.Context, req *danmu.GetDanmuStatsReq) (r *danmu.GetDanmuStatsResp, err error) {
	var _args danmu.DanmuServiceGetDanmuStatsArgs
	_args.Req = req
	var _result danmu.DanmuServiceGetDanmuStatsResult
	if err = p.c.Call(ctx, "GetDanmuStats", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) ManageDanmu(ctx context.Context, req *danmu.ManageDanmuReq) (r *danmu.ManageDanmuResp, err error) {
	var _args danmu.DanmuServiceManageDanmuArgs
	_args.Req = req
	var _result danmu.DanmuServiceManageDanmuResult
	if err = p.c.Call(ctx, "ManageDanmu", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}

func (p *kClient) LikeDanmu(ctx context.Context, req *danmu.LikeDanmuReq) (r *danmu.LikeDanmuResp, err error) {
	var _args danmu.DanmuServiceLikeDanmuArgs
	_args.Req = req
	var _result danmu.DanmuServiceLikeDanmuResult
	if err = p.c.Call(ctx, "LikeDanmu", &_args, &_result); err != nil {
		return
	}
	return _result.GetSuccess(), nil
}
